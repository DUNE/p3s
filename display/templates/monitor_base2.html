{% load render_table from django_tables2 %}
{% load static from staticfiles%}
<!doctype html>
<html>
  <head>
    <title>protoDUNE DQM{{ pageName }}</title>
    <!-- THIS IS TEMP, until we plant it on Apache -->
    <!-- link rel="stylesheet" href="{% static 'django_tables2/themes/paleblue/css/screen.css' %}" / -->
    <link rel="stylesheet" href="{% static 'paleblue/css/screen.css' %}" />
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart', 'bar']});
      google.charts.setOnLoadCallback(drawStuff);

function drawStuff() {
    {% for p in val %}
    var data = new google.visualization.DataTable();
    data.addColumn('timeofday', 'Time of Day');
    data.addColumn('number', 'Lifetime');

    data.addRows([
	{{ p.timeseries }}
    ]);

    var options = {
	title: '{{ p.panel }}',
	legend: {position:'none'},
	height: 150,
	timeZone:-5
    };
      
      
    var chart = new google.charts.Bar(document.getElementById('{{ p.panel }}'));
    chart.draw(data, google.charts.Bar.convertOptions(options));

    {% endfor %}
      };
    </script>
  </head>

  
  <body>
        {% include "topnavbar.html" %}
    <h2>protoDUNE DQM{{ pageName }}</h2>


<table>
  <tr>
    <td align="top">
      <div id="content1">
        {% block content1 %}{% endblock %}
      </div>
    </td>
    <td>
    {% for p in val %}
      <div id="{{ p.panel }}"></div>
    {% endfor %}
    </td>
  </tr>
</table>

    <hr/>  
  </body>
</html>
